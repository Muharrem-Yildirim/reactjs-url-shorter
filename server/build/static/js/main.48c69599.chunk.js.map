{"version":3,"sources":["utils.js","components/ShortenedLink.js","styles/CenteredButton.js","components/ShortenedLinkList.js","axios.js","views/Main.js","App.js","index.js"],"names":["getHistory","JSON","parse","localStorage","getItem","removeHttp","str","replace","ShortenedLink","el","idx","ListItem","ListItemIcon","ListItemText","id","primary","style","display","alignItems","flexWrap","marginLeft","marginRight","CenteredButton","styled","Button","ShortenedLinkList","React","props","ref","history","setHistory","listRef","reload","scrollToBottom","setTimeout","current","scrollTop","length","Typography","variant","align","width","position","List","sx","maxHeight","overflow","bgcolor","subheader","ListSubheader","map","key","marginTop","marginBottom","color","onClick","onClickClear","size","axios","CustomizedCard","Card","Main","onClickShorten","setState","prevState","waitingResponse","shortenedResponse","post","url","state","then","newRow","data","originalUrl","shortUrl","setItem","stringify","isInteractedWithInput","catch","err","alert","response","message","onInputChange","target","name","value","createRef","canPressShorten","minWidth","CardContent","TextField","fullWidth","placeholder","disabled","this","onChange","error","validator","isURL","helperText","InputProps","endAdornment","InputAdornment","navigator","clipboard","writeText","undefined","CardActions","Divider","Component","App","theme","useMemo","createTheme","palette","mode","ThemeProvider","CssBaseline","Grid","container","className","item","lg","md","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.48c69599.chunk.js","sourcesContent":["const getHistory = () => {\r\n  return JSON.parse(localStorage.getItem(\"shorten_history\")) || [];\r\n};\r\n\r\nconst saveHistory = (newRow) => {\r\n  localStorage.setItem(\r\n    \"shorten_history\",\r\n    JSON.stringify([...getHistory(), newRow])\r\n  );\r\n};\r\n\r\nconst clearHistory = () => {\r\n  localStorage.setItem(\"shorten_history\", JSON.stringify([]));\r\n};\r\n\r\nconst removeHttp = (str) => {\r\n  if (str === null) return \"\";\r\n  return str.replace(/^http(s?):\\/\\//i, \"\");\r\n};\r\n\r\nexport { getHistory, saveHistory, clearHistory, removeHttp };\r\n","import React from \"react\";\r\nimport { ListItem, ListItemIcon, ListItemText } from \"@mui/material\";\r\nimport KeyboardArrowRightIcon from \"@mui/icons-material/KeyboardArrowRight\";\r\nimport { removeHttp } from \"../utils\";\r\n\r\nexport default function ShortenedLink({ el, idx }) {\r\n  return (\r\n    <ListItem>\r\n      <ListItemIcon>{idx + 1}</ListItemIcon>\r\n      <ListItemText\r\n        id=\"switch-list-label-bluetooth\"\r\n        primary={\r\n          <span\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              flexWrap: \"wrap\",\r\n            }}\r\n          >\r\n            {removeHttp(el[0])}{\" \"}\r\n            <KeyboardArrowRightIcon\r\n              style={{ marginLeft: 10, marginRight: 10 }}\r\n            />{\" \"}\r\n            {removeHttp(el[1])}\r\n          </span>\r\n        }\r\n      />\r\n    </ListItem>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\nimport { Button } from \"@mui/material\";\r\n\r\nconst CenteredButton = styled(Button)`\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n`;\r\n\r\nexport default CenteredButton;\r\n","import * as React from \"react\";\r\nimport { List, Typography, ListSubheader } from \"@mui/material\";\r\nimport { getHistory } from \"../utils\";\r\nimport ShortenedLink from \"./ShortenedLink\";\r\nimport CenteredButton from \"../styles/CenteredButton\";\r\n\r\nconst ShortenedLinkList = React.forwardRef((props, ref) => {\r\n  const [history, setHistory] = React.useState(getHistory());\r\n  const listRef = React.useRef();\r\n\r\n  React.useImperativeHandle(ref, () => ({\r\n    reload() {\r\n      setHistory(getHistory());\r\n\r\n      scrollToBottom();\r\n    },\r\n  }));\r\n\r\n  React.useEffect(() => {\r\n    scrollToBottom();\r\n  }, []);\r\n\r\n  const scrollToBottom = () => {\r\n    setTimeout(() => {\r\n      if (listRef.current != null) listRef.current.scrollTop = 99999;\r\n    }, 100);\r\n  };\r\n\r\n  return history.length === 0 ? (\r\n    <Typography variant=\"p\" align=\"center\" style={{ display: \"block\" }}>\r\n      Shortened links history is empty.\r\n    </Typography>\r\n  ) : (\r\n    <div style={{ width: \"100%\", position: \"relative\" }}>\r\n      <List\r\n        sx={{\r\n          width: \"100%\",\r\n          maxHeight: \"200px\",\r\n          overflow: \"auto\",\r\n          bgcolor: \"background.paper\",\r\n        }}\r\n        ref={listRef}\r\n        subheader={<ListSubheader>Shortened links history</ListSubheader>}\r\n      >\r\n        {history.map(function (el, idx) {\r\n          return <ShortenedLink el={el} idx={idx} key={idx} />;\r\n        })}\r\n      </List>\r\n      <div\r\n        style={{\r\n          width: \"100%\",\r\n          marginTop: 20,\r\n          marginBottom: 5,\r\n          display: \"flex\",\r\n        }}\r\n      >\r\n        <CenteredButton\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          onClick={props.onClickClear}\r\n          size=\"sm\"\r\n        >\r\n          Clear History\r\n        </CenteredButton>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default ShortenedLinkList;\r\n","import axios from \"axios\";\r\n\r\nif (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n  axios.defaults.baseURL = \"http://localhost:1337\";\r\n}\r\n\r\nexport default axios;\r\n","import React from \"react\";\r\nimport {\r\n  Card,\r\n  CardActions,\r\n  CardContent,\r\n  Button,\r\n  TextField,\r\n  Typography,\r\n  InputAdornment,\r\n  Divider,\r\n} from \"@mui/material\";\r\n\r\nimport ShortenedLinkList from \"../components/ShortenedLinkList\";\r\nimport CenteredButton from \"../styles/CenteredButton\";\r\n\r\nimport { saveHistory, clearHistory } from \"../utils\";\r\nimport axios from \"../axios\";\r\n\r\nimport styled from \"styled-components\";\r\nimport validator from \"validator\";\r\n\r\nconst CustomizedCard = styled(Card)`\r\n  @media (max-width: 1200px) {\r\n    border: 0px !important;\r\n    box-shadow: none;\r\n  }\r\n`;\r\n\r\nexport default class Main extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.listRef = React.createRef(null);\r\n    this.state = {\r\n      shortenedResponse: null,\r\n      canPressShorten: true,\r\n      isInteractedWithInput: false,\r\n      // shortenedResponse: { shortenedLink: \"\" },\r\n    };\r\n  }\r\n\r\n  onClickShorten = () => {\r\n    const listRef = this.listRef.current;\r\n\r\n    if (listRef === null) return;\r\n\r\n    this.setState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        waitingResponse: true,\r\n        shortenedResponse: null,\r\n      };\r\n    });\r\n\r\n    axios\r\n      .post(\"/short\", { url: this.state.url })\r\n      .then(({ data }) => {\r\n        saveHistory([data.originalUrl, data.shortUrl]);\r\n\r\n        this.setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            url: \"\",\r\n            waitingResponse: false,\r\n            isInteractedWithInput: false,\r\n            shortenedResponse: data,\r\n          };\r\n        });\r\n\r\n        listRef.reload();\r\n      })\r\n      .catch((err) => {\r\n        alert(\r\n          err.response?.data?.message ||\r\n            err.response.data ||\r\n            \"Unknown error occured.\"\r\n        );\r\n\r\n        this.setState((prevState) => {\r\n          return {\r\n            ...prevState,\r\n            waitingResponse: false,\r\n            isInteractedWithInput: true,\r\n          };\r\n        });\r\n      });\r\n  };\r\n\r\n  onClickClear = () => {\r\n    const listRef = this.listRef.current;\r\n\r\n    if (listRef === null) return;\r\n\r\n    clearHistory();\r\n\r\n    listRef.reload();\r\n  };\r\n\r\n  getHistory = () => {\r\n    return JSON.parse(localStorage.getItem(\"shorten_history\")) || [];\r\n  };\r\n\r\n  onInputChange = ({ target }) => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        ...prevState,\r\n        [target.name]: target.value.replace(\" \", \"\"),\r\n        isInteractedWithInput: true,\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <CustomizedCard sx={{ minWidth: 275 }}>\r\n        <CardContent>\r\n          <Typography variant=\"h6\">Please enter url to short link.</Typography>\r\n          <TextField\r\n            fullWidth\r\n            style={{ marginTop: 10 }}\r\n            placeholder=\"https://example.com\"\r\n            disabled={this.state.waitingResponse}\r\n            onChange={this.onInputChange}\r\n            value={this.state.url || \"\"}\r\n            name=\"url\"\r\n            error={\r\n              !validator.isURL(this.state.url || \"\") &&\r\n              this.state.isInteractedWithInput &&\r\n              this.state.url !== \"\"\r\n            }\r\n            helperText={\r\n              !validator.isURL(this.state.url || \"\") &&\r\n              this.state.isInteractedWithInput &&\r\n              this.state.url !== \"\" &&\r\n              \"Link is not valid.\"\r\n            }\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  {this.state.shortenedResponse?.shortUrl}\r\n                  <Button\r\n                    style={{ marginLeft: 5 }}\r\n                    onClick={() => {\r\n                      navigator.clipboard.writeText(\r\n                        this.state.shortenedResponse?.shortUrl\r\n                      );\r\n                    }}\r\n                    disabled={\r\n                      this.state.shortenedResponse?.shortUrl === undefined\r\n                    }\r\n                  >\r\n                    Copy\r\n                  </Button>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </CardContent>\r\n        <CardActions>\r\n          <CenteredButton\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            style={{ marginBottom: 20 }}\r\n            onClick={this.onClickShorten}\r\n            disabled={\r\n              this.state.waitingResponse ||\r\n              !validator.isURL(this.state.url || \"\")\r\n            }\r\n          >\r\n            Shorten\r\n          </CenteredButton>\r\n        </CardActions>\r\n        <Divider />\r\n        <CardContent>\r\n          <ShortenedLinkList\r\n            ref={this.listRef}\r\n            onClickClear={this.onClickClear}\r\n          />\r\n        </CardContent>\r\n      </CustomizedCard>\r\n    );\r\n  }\r\n}\r\n","import \"./App.scss\";\nimport Main from \"./views/Main\";\nimport Grid from \"@mui/material/Grid\";\nimport React from \"react\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\n// import useMediaQuery from \"@mui/material/useMediaQuery\";\n\nfunction App() {\n  const prefersDarkMode = false; //useMediaQuery(\"(prefers-color-scheme: dark)\");\n\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode: prefersDarkMode ? \"dark\" : \"light\",\n        },\n      }),\n    [prefersDarkMode]\n  );\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <Grid container className=\"App\">\n        <Grid item lg={5} md={12}>\n          <Main />\n        </Grid>\n      </Grid>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"dotenv\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}